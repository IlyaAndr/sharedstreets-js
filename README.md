# SharedStreets

> Javascript library for using SharedStreets Reference data

## A "digital commons" for the street

New digital tools have the potential to radically improve the efficiency, affordability, and
inclusiveness of our transport system, but success depends on cooperation between the
cities that build and manage our streets and the companies and transport services that use them.

As new transportation technologies emerge, cites need access to increasingly privatized
data about public infrastructure. While private sector innovators are collecting detailed,
street-level data in real time on everything from traffic speeds to transit use, cities don’t
have the access they need. Clearly a new partnership model is needed.

SharedStreets is building a “digital commons” for streets: a universal language for
communicating information about city streets, and a launching pad for public-private
collaboration and data exchange.

### Universal Data Standards

The platform allows parties to connect their own data workflows and systems and take advantage of a growing range of new data sources. SharedStreets data standards facilitate public and private collaboration through a non-proprietary
system for describig streets.

[Learn more about SharedStreets Data Standards »](https://github.com/sharedstreets/sharedstreets-referencing)

![image](https://github.com/sharedstreets/sharedstreets-ref-system/raw/master/img/gis_vs_sharedstreets.png)

### Trusted Third Party Data Exchange

![image](https://github.com/sharedstreets/sharedstreets-ref-system/raw/master/img/sharedstreets_references.png)

Shared digital infrastructure lets cities use standardized practices to ensure user and business privacy.
It also uses best-in-practice reusable licensing models to support public and commercial data sharing agreements.

## Install

**In Node.js**

```bash
$ npm install sharedstreets
```

**In browser**

Download the [minified file](https://unpkg.com/sharedstreets/sharedstreets.min.js), and include it in a script tag. This will expose a global variable named **sharedstreets**.

```html
<script src="sharedstreets.min.js" charset="utf-8"></script>
```

**In browser ES Modules support**

```html
<script type='module'>
import * as sharedstreets from "https://unpkg.com/sharedstreets?module"
</script>
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [geometry](#geometry)
-   [intersection](#intersection)
-   [generateHash](#generatehash)
-   [getRoadClass](#getroadclass)
-   [getFormOfWay](#getformofway)

### geometry

Geometry

SharedStreets Geometries are street centerline data derived from the basemap used to
produce SharedStreets References. A single geometry is shared by each set of forward and back references.

SharedStreets is premised on the idea that there's no one correct geometry for a given street.
Just as street references can be generated from any basemap, street geometries can be derived from any data source.

**Parameters**

-   `line` **(Feature&lt;LineString> | [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)>>)** Line Geometry as a GeoJSON LineString or an Array of Positions Array&lt;&lt;longitude, latitude>>.
-   `options` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Optional parameters (optional, default `{}`)
    -   `options.fromIntersectionId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** From Intersection SharedStreets Reference ID
    -   `options.toIntersectionId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** To Intersection SharedStreets Reference ID
    -   `options.forwardReferenceId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** Forward SharedStreets Reference ID
    -   `options.backwardReferenceId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** Backward SharedStreets Reference ID
    -   `options.roadClass` **([string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String) \| [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number))?** Road Class as number or full string name ('Motorway', 'Residential', etc...)

**Examples**

```javascript
const line = [[110, 45], [115, 50], [120, 55]]
const geom = sharedstreets.geometry(line)
geom.id // => 'ce9c0ec1472c0a8bab3190ab075e9b21'
```

Returns **Feature&lt;LineString>** SharedStreets Geometry

### intersection

Intersection

> Nodes connecting street street segments references

SharedStreets uses 128-bit shorthand identifiers to relate data within the SharedStreets referencing system.
These IDs provide a basemap-independent addressing system for street segment references,
intersections and geometries. These identifiers are generated deterministically using a hash of the underlying data.
This means that two different users with the same input data can generate matching SharedStreets identifiers.
This simplifies data sharing, allowing users to match data using shorthand IDs whenever possible.

In the draft specification the 128-bit IDs are encoded as base-58 strings.

**Parameters**

-   `pt` **(Feature&lt;Point> | [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)>)** Point location reference as a GeoJSON Point or an Array of numbers &lt;longitude, latitude>.
-   `options` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Optional parameters (optional, default `{}`)
    -   `options.osmNodeId` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)?** OSM Node Id
    -   `options.outboundReferenceIds` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>?** Outbound Reference Ids
    -   `options.inboundReferenceIds` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>?** Inbound Reference Ids

**Examples**

```javascript
const pt = [110, 45];
const intersection = sharedstreets.intersection(pt);
intersection.id // => '71f34691f182a467137b3d37265cb3b6'
```

Returns **Feature&lt;Point>** SharedStreets Intersection

### generateHash

Generates Hash for SharedStreets Reference ID

**Parameters**

-   `message` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Message to hash

**Examples**

```javascript
sharedstreets.generateHash('Intersection 110.000000 45.000000')
// => '71f34691f182a467137b3d37265cb3b6'
```

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** SharedStreets Reference ID

### getRoadClass

getRoadClass

**Parameters**

-   `value` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Number value [between 0-8]

**Examples**

```javascript
sharedstreets.getRoadClass(0) // => 'Motorway'
sharedstreets.getRoadClass(5) // => 'Residential'
```

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Road Class

### getFormOfWay

getFormOfWay

**Parameters**

-   `value` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Number value [between 0-8]

**Examples**

```javascript
sharedstreets.getFormOfWay(0) // => 'Undefined'
sharedstreets.getFormOfWay(5) // => 'TrafficSquare'
```

Returns **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Form of Way
